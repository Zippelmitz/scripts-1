#!/bin/sh

workdir=`mktemp -d -t my-perl-update-process`
if [ ! -d "$workdir" ] ; then
  echo "Could not create temporary work directory: $!"
  exit 1
fi
cd $workdir

which minicpan > /dev/null
if [ $? == 1 ] ; then
  cpanm CPAN::Mini
fi
minicpan

git clone git://github.com/melo/task-belike-melo.git bootstrap
cd bootstrap || exit

which dzil > /dev/null
if [ $? == 1 ] ; then
  cpanm Dist::Zilla
fi

dzil authordeps | cpanm
dzil run cpanm --installdeps .
moose-outdated | cpanm
dzil run cpanm --installdeps .

cpan-outdated | cpanm
moose-outdated | cpanm
